(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{133:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(24),c=r.n(s),o=(r(66),r(4)),i=(r(67),r(15)),l=r(6),u=r(53),d=r.n(u),b=r.p+"static/media/admin.c477c120.svg",p=r.p+"static/media/student.6ad307b7.svg",j=r.p+"static/media/driver.c696520f.svg",h=r(0);function f(){var e=Object(l.f)();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{style:{color:"#808080",fontFamily:"Staatliches",fontSize:"24px",marginBottom:"10px",marginTop:"30px"},children:Object(h.jsx)(d.a,{text:["Federal Polytechnic Nasarawa","Project By...","Yakubu Abraham","BookBus","Booking Made Easy\ud83d\ude0e\ud83d\ude0e"],speed:50,eraseDelay:2e3})}),Object(h.jsx)("p",{style:{fontFamily:"flamenco",fontSize:"24px",fontWeight:"bolder",margin:"15px"},className:"login-as",children:"Login As"}),Object(h.jsxs)("div",{className:"home",children:[Object(h.jsxs)("div",{className:"home-div",onClick:function(){return e.push("/user")},children:[Object(h.jsx)("h3",{style:{margin:0,marginBottom:"10px"},children:"Student"}),Object(h.jsx)("img",{src:p,alt:"Student",style:{height:"7rem",border:"none",outline:"none"}})]}),Object(h.jsxs)("div",{className:"home-div",onClick:function(){return e.push("/driver")},children:[Object(h.jsx)("h3",{style:{margin:0,marginBottom:"10px"},children:"Driver"}),Object(h.jsx)("img",{src:j,alt:"Driver",style:{height:"7rem",border:"none",colorAdjust:"#000",outline:"none"}})]}),Object(h.jsxs)("div",{className:"home-div",onClick:function(){return e.push("/admin")},children:[Object(h.jsx)("h3",{style:{margin:0,marginBottom:"10px"},children:"Admin"}),Object(h.jsx)("img",{src:b,alt:"Admin",style:{height:"7rem",border:"none",colorAdjust:"#000",outline:"none"}})]})]})]})}var m=r(5),x=r.n(m),g=r(7),O=r(2),v=(r(35),function(e){var t=e.name,r=e.matric,a=e.email,s=e.password,c=e.setName,i=e.setEmail,l=e.setMatric,u=e.setPassword,d=e.signUp,b=e.isSignUpEmpty,p=e.toast,j=Object(n.useState)(""),f=Object(o.a)(j,2),m=f[0],x=f[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{type:"text",className:"input",value:t,onChange:function(e){return c(e.target.value)},placeholder:"Name"}),Object(h.jsx)("input",{type:"text",className:"input",value:r,onChange:function(e){return l(e.target.value)},placeholder:"Matric Number"}),Object(h.jsx)("input",{type:"email",className:"input",value:a,onChange:function(e){return i(e.target.value)},placeholder:"Email"}),Object(h.jsx)("input",{type:"password",className:"input",value:s,onChange:function(e){return u(e.target.value)},placeholder:"Password"}),Object(h.jsx)("input",{type:"password",className:"input",value:m,onChange:function(e){return x(e.target.value)},placeholder:"Confirm Password",required:!0}),Object(h.jsx)("button",{className:"button login-btn",onClick:function(){return s===m?d():p.error("Password doesn't match")},style:{opacity:b?"0.6":"1"},children:"Sign Up"})]})}),y=function(e){var t=e.id,r=e.password,n=e.setId,a=e.setPassword,s=e.login,c=e.isLoginEmpty;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{type:"text",className:"input",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Email or Matric No",required:!0}),Object(h.jsx)("input",{type:"password",className:"input",value:r,onChange:function(e){return a(e.target.value)},placeholder:"Password",required:!0}),Object(h.jsx)("button",{className:"button login-btn",onClick:s,style:{opacity:c?"0.6":"1"},children:"Login"})]})},k=r(10),S=r.n(k),w=function(e,t,r){var n;return function(){var a=Object(g.a)(x.a.mark((function a(){var s,c,o,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.auth){a.next=11;break}a.t0=t.type,a.next="user"===a.t0?4:"driver"===a.t0?6:"admin"===a.t0?8:10;break;case 4:return n=localStorage.getItem("token"),a.abrupt("break",11);case 6:return n=localStorage.getItem("driverToken"),a.abrupt("break",11);case 8:return n=localStorage.getItem("adminToken"),a.abrupt("break",11);case 10:n="";case 11:a.t1=e.method,a.next="post"===a.t1?14:"get"===a.t1?29:43;break;case 14:return a.prev=14,r(!0),a.next=18,S.a.post(e.url,e.body,t.auth?{headers:{Authorization:"Bearer ".concat(n)}}:null);case 18:return s=a.sent,r(!1),a.abrupt("return",{data:s.data,status:s.status});case 23:throw a.prev=23,a.t2=a.catch(14),r(!1),c=a.t2.message.split(" ")[5],new Error(c);case 28:return a.abrupt("break",44);case 29:return a.prev=29,r(!0),a.next=33,S.a.get(e.url,t.auth?{headers:{Authorization:"Bearer ".concat(n)}}:null);case 33:return o=a.sent,r(!1),a.abrupt("return",{data:o.data,status:o.status});case 38:throw a.prev=38,a.t3=a.catch(29),r(!1),i=a.t3.message.split(" ")[5],new Error(+i);case 43:return a.abrupt("return",null);case 44:case"end":return a.stop()}}),a,null,[[14,23],[29,38]])})));return function(){return a.apply(this,arguments)}}()};function N(e){var t=e.loading,r=Object(n.useState)(""),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(n.useState)(""),j=Object(o.a)(p,2),f=j[0],m=j[1],k=Object(n.useState)(""),S=Object(o.a)(k,2),N=S[0],C=S[1],I=Object(n.useState)(""),B=Object(o.a)(I,2),T=B[0],D=B[1],_=Object(n.useState)(!0),F=Object(o.a)(_,2),A=F[0],E=F[1],z=Object(n.useState)(!0),P=Object(o.a)(z,2),L=P[0],W=P[1],R=Object(n.useState)(!0),J=Object(o.a)(R,2),U=J[0],q=J[1],M=Object(l.f)();Object(n.useEffect)((function(){W(""===s||""===d)}),[s,d]),Object(n.useEffect)((function(){q(""===f||""===d||""===T||""===N)}),[f,T,N,d]),Object(n.useEffect)((function(){localStorage.getItem("token")&&M.push("/user/dashboard")}),[M]);var Y=w({url:"https://bookbus.herokuapp.com/user/login",method:"post",body:{id:s,password:d}},{auth:!1},t),H=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Y();case 5:200===(t=e.sent).status&&(O.b.success("Logged in successfully!!",{autoClose:1e3}),localStorage.setItem("token",t.data),M.push("/user/dashboard")),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.message,e.next="400"===e.t1?14:16;break;case 14:return O.b.error("Invalid Login Details",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",17);case 16:O.b.error("Something went wrong");case 17:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),V=w({url:"https://bookbus.herokuapp.com/user/register",method:"post",body:{name:f,email:T,password:d,matric_number:N}},{auth:!1},t),K=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,V();case 5:201===e.sent.status&&(O.b.success("Account created Successfully",{autoClose:1e3}),E(!0)),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.message,e.next="400"===e.t1?14:16;break;case 14:return O.b.error("User already exist",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",17);case 16:O.b.error("Something went wrong");case 17:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O.a,{}),Object(h.jsx)("div",{className:"container",style:{},children:Object(h.jsxs)("div",{style:{width:"100%"},children:[Object(h.jsx)("h3",{style:{color:"#444",fontFamily:"Buenard",fontSize:"24px",fontWeight:"lighter"},children:A?"Login":"Sign Up"}),Object(h.jsxs)("form",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",padding:"20px",paddingTop:0,alignSelf:"center",borderRadius:"5px",margin:"auto"},children:[Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"auto",alignSelf:"flex-end",marginTop:0,marginBottom:"10px",background:"#f4f4f4",height:"fit-content",padding:0},children:[Object(h.jsx)("button",{className:"button user-login",style:{borderTopStyle:A?"solid":"none",borderWidth:"3px",borderColor:"#50c878",background:A?"#fff":"#f4f4f4 ",opacity:A?"1":"0.5"},onClick:function(){return E(!0)},children:"Login"}),Object(h.jsx)("button",{className:"button user-login",onClick:function(){return E(!1)},style:{borderTopStyle:A?"none":"solid",borderWidth:"3px",borderColor:"#50c878",background:A?"#f4f4f4 ":"#fff",opacity:A?"0.5":"1"},children:"Sign Up"})]}),A?Object(h.jsx)(y,{id:s,password:d,setId:c,setPassword:b,login:H,isLoginEmpty:L}):Object(h.jsx)(v,{name:f,matric:N,password:d,email:T,setName:m,setEmail:D,setMatric:C,setPassword:b,signUp:K,isSignUpEmpty:U,toast:O.b})]})]})})]})}var C=r(16),I=r(17),B=r.p+"static/media/signin.c94a6b0c.svg",T=r(9),D=r.n(T),_=r.p+"static/media/profile.a8d98262.svg";function F(e){var t=e.setShowNavbar,r=e.fundWallet,n=(e.showNavbar,Object(l.f)()),a=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):"",s=a.name,c=a.matric_number,o=a.email;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{borderStyle:"dashed",padding:"10px",borderWidth:"5px",borderColor:"#fff"},children:[Object(h.jsx)("img",{src:_,alt:"Profile",style:{height:"7rem",border:"none",outline:"none"}}),Object(h.jsxs)("div",{style:{color:"#fff",fontSize:"20px",fontFamily:"Arapey"},children:[Object(h.jsxs)("div",{children:["Name: ",s]}),Object(h.jsxs)("div",{children:["Email: ",o]}),Object(h.jsxs)("div",{children:["Matric Number: ",c]})]})]}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:"20px"},children:[Object(h.jsx)("button",{className:"button green",onClick:function(){return r()},children:"Fund Wallet"}),Object(h.jsx)("button",{className:"button red",onClick:function(){D.a.fire({title:"Do you want to Logout?",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(e){e.isConfirmed&&(t(!1),n.push("/"),localStorage.clear(),window.location.reload())}))},children:"Logout"})]})]})}function A(e){var t=e.setShowNavbar,r=(e.showNavbar,localStorage.getItem("busId")),n=Object(l.f)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{borderStyle:"dashed",padding:"10px",borderWidth:"5px",borderColor:"#fff"},children:[Object(h.jsx)("img",{src:_,alt:"Profile",style:{height:"7rem",border:"none",outline:"none"}}),Object(h.jsx)("div",{style:{color:"#fff",fontSize:"20px",fontFamily:"Arapey"},children:Object(h.jsxs)("div",{children:["Bus Number: 0",r]})})]}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:"20px"},children:Object(h.jsx)("button",{className:"button red",onClick:function(){D.a.fire({title:"Do you want to Logout?",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(e){e.isConfirmed&&(t(!1),n.push("/"),localStorage.clear(),window.location.reload())}))},children:"Logout"})})]})}var E=function(e){var t=e.showNavbar,r=e.setShowNavbar,n=e.fundWallet;return Object(h.jsx)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgb(38, 46, 59)",top:0,zIndex:"44",right:"0",width:"100%"},className:t?"show-nav":"hide-nav",children:localStorage.getItem("token")?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(F,{setShowNavbar:r,showNavbar:t,fundWallet:n})}):localStorage.getItem("driverToken")?Object(h.jsx)(A,{setShowNavbar:r,showNavbar:t}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{marginTop:"-40px"},children:[Object(h.jsx)("img",{src:B,alt:"Sign In",className:"nav-image",style:{border:"none",outline:"none",alignSelf:"center"}}),Object(h.jsx)("div",{style:{color:"#fff",margin:"10px",fontSize:"20px"},children:"Sign Up or Login to get started"}),Object(h.jsx)("button",{className:"button red",style:{marginBottom:"20px"},onClick:function(){return r(!1)},children:"Get Started"})]})})})};function z(e){var t=e.setShowNavbar,r=e.showNavbar,n=e.wallet,a=e.fundWallet;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{children:[Object(h.jsx)("div",{style:{position:"absolute",height:"100%",width:"100vw",backgroundColor:"#50c878",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:localStorage.getItem("token")?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{color:"#fff",fontFamily:"arapey",marginRight:"10px",fontSize:"20px",fontWeight:"600"},children:["\u20a6",n]})}):null}),Object(h.jsx)("button",{onClick:function(){return t(!r)},style:{background:"none",border:"none",outline:"none",marginLeft:"20px",zIndex:"47"},className:"nav-icon",children:r?Object(h.jsx)(C.a,{icon:I.c,size:"2x",style:{}}):Object(h.jsx)(C.a,{icon:I.a,size:"2x",style:{}})})]}),Object(h.jsx)(E,{showNavbar:r,setShowNavbar:t,fundWallet:a})]})}var P=r(56),L=r.n(P);function W(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)(L.a,{type:"TailSpin",color:"#007fff",height:50})})})}var R=r(26),J=r(57),U=r.n(J);function q(){var e=JSON.parse(localStorage.getItem("ticket")),t=JSON.parse(localStorage.getItem("data"));return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",fontFamily:"Arapey",fontSize:"18px",background:"#fff",padding:"20px",height:"60vh",color:"#666"},className:"ticket",children:[Object(h.jsx)("div",{style:{fontSize:"22px",fontWeight:"bold"},children:"Ticket"}),Object(h.jsxs)("div",{children:["Name: ",t.name]}),Object(h.jsxs)("div",{children:["Matric Number: ",t.matric_number]}),Object(h.jsxs)("div",{children:["Ticket ID: ",e.code]}),Object(h.jsxs)("div",{children:["Bus ID: ",e.bus_id]}),Object(h.jsxs)("div",{children:["Seat: ",e.seat]}),Object(h.jsxs)("div",{children:["Destination: ",e.destination]}),Object(h.jsxs)("div",{children:["Departure Time: ",e.departure_time]}),e.code?Object(h.jsx)(U.a,{value:e.code}):null]})})}var M=r.p+"static/media/pay.e333a550.svg",Y=r(18),H=r.n(Y),V=r(27),K=r.n(V),G=r(28),Q=r.n(G),X=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):"",Z=((new Date).getTime().toString(),X.email,function(e){var t=e.handleChange,r=e.loading,n=function(e){return H.a.extend(K.a),H.a.extend(Q.a),H()(e).tz("Africa/Lagos").format("hh:mm A")},a=(Object(l.f)(),localStorage.getItem("token")),s=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):"",c={reference:(new Date).getTime().toString(),email:s.email,amount:5e3,publicKey:"pk_test_0a4093b99f32878ae511ab0f19d32710c16702f8"},o=function(e){(function(){var a=Object(g.a)(x.a.mark((function a(){var s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r(!0),a.next=4,S.a.post("https://bookbus.herokuapp.com/user/book/".concat(localStorage.getItem("bus_id")),{chargeType:"bank",reference_id:e.reference},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:s=a.sent,localStorage.setItem("ticket",JSON.stringify({bus_id:s.data.bus_id,code:s.data.code,seat:s.data.seat,destination:s.data.destination,departure_time:n(s.data.departure_time)})),r(!1),t("ticket"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),r(!1),O.b.error("An error occured");case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()},i=function(){},u=Object(R.a)(c);return Object(h.jsxs)("div",{style:{background:"#fff",padding:"20px",borderRadius:"10px"},className:"pay-div",children:[Object(h.jsx)("img",{src:M,alt:"pay",style:{height:"7rem",border:"none",outline:"none"}}),Object(h.jsx)("p",{style:{fontFamily:"flamenco",fontSize:"20px"},children:"Pay from?"}),Object(h.jsxs)("div",{style:ee,children:[Object(h.jsx)("button",{className:"button book",onClick:function(){u(o,i)},children:"Bank"}),Object(h.jsx)("button",{className:"button book",onClick:function(){return D.a.fire({text:"You will be charged #50 from your wallet",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Confirm"}).then(function(){var e=Object(g.a)(x.a.mark((function e(s){var c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isConfirmed){e.next=23;break}return r(!0),e.prev=2,e.next=5,S.a.post("https://bookbus.herokuapp.com/user/book/".concat(localStorage.getItem("bus_id")),{chargeType:"wallet"},{headers:{Authorization:"Bearer ".concat(a)}});case 5:c=e.sent,r(!1),localStorage.removeItem("bus_id"),localStorage.setItem("ticket",JSON.stringify({bus_id:c.data.bus_id,code:c.data.code,seat:c.data.seat,destination:c.data.destination,departure_time:n(c.data.departure_time)})),O.b.success("Payment Successful"),t("ticket"),e.next=23;break;case 13:e.prev=13,e.t0=e.catch(2),r(!1),o=e.t0.message.split(" ")[5],e.t1=o,e.next="406"===e.t1?20:22;break;case 20:return O.b.error("Insufficient funds"),e.abrupt("break",23);case 22:O.b.error("Network Error");case 23:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}())},children:"Wallet"})]})]})});function $(e){var t=e.loading,r=Object(n.useState)("default"),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(l.f)();return Object(n.useEffect)((function(){localStorage.getItem("bus_id")||i.push("/user/dashboard")}),[i]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),"default"===s?Object(h.jsx)(Z,{handleChange:function(e){c(e)},loading:t}):Object(h.jsx)(q,{})]})}var ee={display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"center"};function te(e){var t=e.loading,r=Object(n.useState)(""),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(n.useState)(!0),j=Object(o.a)(p,2),f=j[0],m=j[1],v=Object(l.f)();Object(n.useEffect)((function(){m(""===s||""===d)}),[s,d]);var y=w({url:"https://bookbus.herokuapp.com/bus/driver/login",method:"post",body:{username:s,password:d}},{auth:!1},t),k=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y();case 5:200===(t=e.sent).status&&(localStorage.setItem("driverToken",t.data.token),localStorage.setItem("busId",t.data.bus_id),v.push("/driver/dashboard"),O.b.success("Logged in successfully!!",{autoClose:1e3})),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.message,e.next="400"===e.t1?14:16;break;case 14:return O.b.error("Invalid Login Details",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",17);case 16:O.b.error("Something went wrong");case 17:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){localStorage.getItem("driverToken")&&v.push("/driver/dashboard")}),[v]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsxs)("form",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",padding:"20px",alignSelf:"center",borderRadius:"5px",margin:"auto"},children:[Object(h.jsx)("div",{style:{fontSize:"25px",color:"#444",fontFamily:"Arapey",marginBottom:"5px"},children:"Login"}),Object(h.jsx)("input",{type:"text",className:"input",value:s,onChange:function(e){return t=e.target.value,void c(t);var t},placeholder:"Username",required:!0}),Object(h.jsx)("input",{type:"password",className:"input",value:d,onChange:function(e){return t=e.target.value,void b(t);var t},placeholder:"password",required:!0}),Object(h.jsx)("button",{className:"button login-btn",onClick:function(){return k()},style:{opacity:f?"0.6":"1"},children:"Login"})]})]})}r(51),r(52);var re=r(58),ne=r.n(re);function ae(e){var t=e.loading,r=Object(n.useState)(""),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1],b=localStorage.getItem("driverToken");var p=function(){var e=Object(g.a)(x.a.mark((function e(r){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,S.a.get("https://bookbus.herokuapp.com/bus/ticket/verify/".concat(r),{headers:{Authorization:"Bearer ".concat(b)}});case 4:200===(n=e.sent).status&&(t(!1),D.a.fire({title:"<strong>Verified</strong>",icon:"success",html:"\n\t\t\t\t<div>Matric Number: ".concat(n.data.matric_number,"</div>\n\t\t\t\t<div>Ticket ID: ").concat(n.data.code,"</div>\n\t\t\t\t\n\t\t\t\t<div>Seat: ").concat(n.data.seat,"</div>\n\t\t\t\t<div>Destination: ").concat(n.data.destination,"</div>\n\t\t\t\t<div>Departure Time: ").concat(n.data.departure_time,"</div>"),showCloseButton:!1,showCancelButton:!0}).then((function(e){e.isConfirmed&&d(!1)}))),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(1),t(!1),a=e.t0.message.split(" ")[5],e.t1=a,e.next="404"===e.t1?15:17;break;case 15:return O.b.error("Ticket Not Valid",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",18);case 17:O.b.error("Network Error");case 18:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),u?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ne.a,{delay:500,style:{height:240,width:320},onError:function(e){console.error(e)},onScan:function(e){e&&p(e)}})}):Object(h.jsxs)("div",{className:"home-div",children:[Object(h.jsx)("div",{style:{fontSize:"22px",fontFamily:"Flamenco",color:"#444",marginBottom:"10px",fontWeight:"bold"},children:"Verify Ticket"}),Object(h.jsx)("input",{type:"text",maxLength:"4",value:s,onChange:function(e){return t=e.target.value,void c(t);var t},className:"input",placeholder:"Enter Ticket ID"}),Object(h.jsx)("button",{className:"input button green",onClick:function(){return p(s)},children:"Verify"}),Object(h.jsx)("div",{style:{fontSize:"25px",marginTop:"16px",fontWeight:"bold",color:"#444"},children:"Or"}),Object(h.jsx)("button",{className:"button green",onClick:function(){return d(!0)},children:"Scan"})]})]})}function se(e){var t=e.loading,r=Object(n.useState)(!1),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(l.f)();return Object(h.jsx)("div",{className:"container",children:s?Object(h.jsx)(ae,{loading:t}):Object(h.jsxs)("div",{className:"dashboard-div",children:[Object(h.jsx)("button",{className:"input button green",onClick:function(){return c(!0)},children:"Verify Ticket"}),Object(h.jsx)("button",{className:"input button green",onClick:function(){return i.push("/driver/ongoing-trip")},children:"Ongoing Trip"}),Object(h.jsx)("button",{className:"input button green",onClick:function(){return i.push("/driver/newtrip")},children:"Create New Trip"})]})})}var ce=r(60),oe=r.n(ce),ie=r(61),le=r.n(ie);function ue(e){var t=e.loading,r=Object(n.useState)(new Date(Date.now())),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)("Hostel"),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(l.f)(),j=Object(n.useCallback)((function(e){var t=e.label;b((function(e){return t}))}),[]),f=w({url:"https://bookbus.herokuapp.com/bus/driver/status",method:"post",body:{destination:d,departure_time:s}},{auth:!0,type:"driver"},t),m=Object(n.useCallback)(Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:201===e.sent.status&&O.b.success("Trip Created Successfully"),e.next=19;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.message,e.next="400"===e.t1?12:"401"===e.t1?14:18;break;case 12:return O.b.error("You have an active trip",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",19);case 14:return O.b.error("Session Expired"),p.push("/driver"),localStorage.clear(),e.abrupt("break",19);case 18:O.b.error("An error occured");case 19:case"end":return e.stop()}}),e,null,[[0,7]])}))),[p,f]);return Object(n.useEffect)((function(){""!==d&&""!==s||O.b.error("Fill out all fields")}),[m,s,d]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsx)("h3",{style:{fontSize:"25px",color:"#444"},children:"New Trip"}),Object(h.jsxs)("div",{style:{fontFamily:"arapey",color:"#444"},className:"dashboard-div",children:[Object(h.jsx)("p",{style:{margin:"3px",fontSize:"22px"},children:"Destination"}),Object(h.jsx)(le.a,{options:["Hostel","Campus"],onChange:j,value:"Hostel",className:"dropdown"}),Object(h.jsx)("p",{style:{marginBottom:"3px",marginLeft:"3px",fontSize:"22px"},children:"Departure Time"}),Object(h.jsx)(oe.a,{options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minDate:new Date(Date.now()),defaultDate:s},className:"input flatpickr",onChange:function(e){c(e)},style:{width:"90%"}}),Object(h.jsx)("button",{className:"button green ",style:{width:"90%"},onClick:m,children:"Create Trip"})]})]})}function de(e){var t=e.loading,r=Object(n.useState)(""),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(!0),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(l.f)();Object(n.useEffect)((function(){b(""===s)}),[s]);var j=w({url:"https://bookbus.herokuapp.com/bus/admin/login",method:"post",body:{pin:s}},{auth:!1},t),f=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j();case 5:200===(t=e.sent).status&&(localStorage.setItem("adminToken",t.data),p.push("/admin/dashboard"),O.b.success("Logged in successfully!!",{autoClose:1e3})),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.message,e.next="400"===e.t1?14:16;break;case 14:return O.b.error("Invalid Pin",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",17);case 16:O.b.error("Something went wrong");case 17:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsxs)("form",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",padding:"20px",alignSelf:"center",borderRadius:"5px",margin:"auto"},children:[Object(h.jsx)("div",{style:{fontSize:"25px",color:"#444",fontFamily:"Arapey",marginBottom:"5px"},children:"Login"}),Object(h.jsx)("input",{type:"password",className:"input",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Secret Pin",required:!0}),Object(h.jsx)("button",{className:"button login-btn",onClick:function(){return f()},style:{opacity:d?"0.6":"1"},children:"Login"})]})]})}var be=r.p+"static/media/empty.f5635653.svg";function pe(e){var t=e.amount,r=e.loading,a=e.setFund,s=JSON.parse(localStorage.getItem("data")),c=Object(R.a)({reference:(new Date).getTime().toString(),email:s.email,amount:t,publicKey:"pk_test_0a4093b99f32878ae511ab0f19d32710c16702f8"});Object(n.useEffect)((function(){return function(){return a(!1)}}),[a]);return c((function(e){r(!0),function(){var t=Object(g.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("https://bookbus.herokuapp.com/user/wallet/fund",{reference_id:e.reference},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:r(!1),window.location.reload(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),r(!1),window.location.reload();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),(function(){r(!1),a(!1),window.location.reload()})),Object(h.jsx)("div",{children:r(!0)})}function je(e){var t=e.loading,r=e.setWallet,a=e.fund,s=e.setFund,c=e.amount,i=Object(n.useState)([]),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(n.useState)(!0),j=Object(o.a)(p,2),f=j[0],m=j[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),k=y[0],N=y[1],B=w({url:"https://bookbus.herokuapp.com/user",method:"get"},{auth:!0,type:"user"},t),T=w({url:"https://bookbus.herokuapp.com/user/bus/Hostel",method:"get"},{auth:!0,type:"user"},t),_=w({url:"https://bookbus.herokuapp.com/user/bus/Campus",method:"get"},{auth:!0,type:"user"},t),F=function(){var e=Object(g.a)(x.a.mark((function e(t,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.toLowerCase(),r),D.a.fire({title:"Do you really want to cancel trip?",showCancelButton:!0,confirmButtonText:"Yes"}).then(function(){var e=Object(g.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=21;break}return e.prev=1,e.next=4,S.a.post("https://bookbus.herokuapp.com/user/cancel-trip/".concat(t.toLowerCase(),"/").concat(r),{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:e.sent,O.b.success("Trip cancelled successfully"),setTimeout((function(){return window.location.reload()}),1500),e.next=21;break;case 9:e.prev=9,e.t0=e.catch(1),e.t1=e.t0.message,e.next="400"===e.t1?14:"401"===e.t1?16:20;break;case 14:return O.b.error("An error occured",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",21);case 16:return O.b.error("Session Expired"),A.push("/admin"),localStorage.clear(),e.abrupt("break",21);case 20:O.b.error("An error occured");case 21:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),A=Object(l.f)(),E=Object(n.useCallback)(function(){var e=Object(g.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"hostel"!==t){e.next=7;break}return e.next=4,T();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,_();case 9:e.t0=e.sent;case 10:200===(r=e.t0).status&&(b(r.data),m("hostel"===t),r.data.ticket?N(!0):N(!1)),e.next=24;break;case 14:e.prev=14,e.t1=e.catch(0),e.t2=e.t1.message,e.next="401"===e.t2?19:23;break;case 19:return O.b.error("Session Expired"),A.push("/user"),localStorage.clear(),e.abrupt("break",24);case 23:O.b.error("An error occured");case 24:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[_,T,A]),z=Object(n.useCallback)(Object(g.a)(x.a.mark((function e(){var t,n,a,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:t=e.sent,n=t.data,a=n.name,s=n.email,c=n.matric_number,localStorage.setItem("data",JSON.stringify({name:a,email:s,matric_number:c})),E("hostel"),r(t.data.wallet),e.next=20;break;case 10:e.prev=10,e.t0=e.catch(0),e.t1=e.t0.message,e.next="401"===e.t1?15:19;break;case 15:return O.b.error("Session Expired"),A.push("/user"),localStorage.clear(),e.abrupt("break",20);case 19:O.b.error("An error occured");case 20:case"end":return e.stop()}}),e,null,[[0,10]])}))),[B,E,r,A]);Object(n.useEffect)((function(){z()}),[]);var P=function(e){return H.a.extend(K.a),H.a.extend(Q.a),H()(e).tz("Africa/Lagos").format("hh:mm A")};return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsxs)("div",{style:{fontSize:"25px",alignSelf:"flex-start",marginLeft:"10px",fontWeight:"bold",color:"#444"},children:["Welcome"," ",localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")).name.split(" ")[0]:"Anonymous"]}),Object(h.jsx)("div",{style:{fontSize:"22px",fontFamily:"flamenco",padding:"20px"},children:"Where are you going to?"}),Object(h.jsxs)("div",{style:{display:"flex",alignSelf:"flex-end",marginRight:"20px",background:"#fff",borderRadius:"47%"},children:[Object(h.jsx)("button",{style:f?he:fe,onClick:function(){return E("hostel")},children:"Hostel"}),Object(h.jsx)("button",{style:f?fe:he,onClick:function(){return E("campus")},children:"Campus"})]}),a?Object(h.jsx)(pe,{amount:c,loading:t,setFund:s}):k?Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"home",children:d[Object.keys(d)[0]]?Object(h.jsxs)("div",{className:"dashboard-div",children:[Object(h.jsx)("div",{style:{alignSelf:"flex-end",backgroundColor:"#b3f1cb",color:"#50c878",padding:"5px",fontFamily:"arapey"},children:"Booked"}),Object(h.jsxs)("div",{style:{height:"150px",width:"150px",borderRadius:"50%",background:"#b3f1cb",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},className:"",children:[Object(h.jsx)(C.a,{icon:I.b,size:"lg",style:{color:"#50c878"}}),Object(h.jsxs)("b",{style:{color:"#fff",fontSize:"2rem"},children:["0",d[Object.keys(d)[0]].bus_id]})]}),Object(h.jsxs)("p",{style:{fontFamily:"arapey",color:"#444"},children:["Departure Time:"," ",d[Object.keys(d)[0]].departure_time?P(d[Object.keys(d)[0]].departure_time):null]}),Object(h.jsx)("button",{className:"button book",onClick:function(){localStorage.setItem("ticket",JSON.stringify({bus_id:d[Object.keys(d)[0]].bus_id,code:d.ticket.code,seat:d.ticket.seat,destination:d[Object.keys(d)[0]].destination,departure_time:P(d[Object.keys(d)[0]].departure_time)})),A.push("/user/ticket")},children:"View Ticket"}),Object(h.jsx)("button",{className:"button book red",onClick:function(){return F(d[Object.keys(d)[0]].destination,d[Object.keys(d)[0]].bus_id)},children:"Cancel Trip"})]}):null})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"home",children:Array.isArray(d)&&0!==d.length?d.map((function(e,t){return Object(h.jsxs)("div",{className:"dashboard-div",children:[Object(h.jsxs)("div",{style:{height:"150px",width:"150px",borderRadius:"50%",background:"#b3f1cb",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},className:"",children:[Object(h.jsx)(C.a,{icon:I.b,size:"lg",style:{color:"#50c878"}}),Object(h.jsxs)("b",{style:{color:"#fff",fontSize:"2rem"},children:["0",e.bus_id]})]}),Object(h.jsxs)("p",{style:{fontFamily:"arapey",color:"#444"},children:["Departure Time:"," ",e.departure_time?P(e.departure_time):null]}),Object(h.jsx)("button",{className:"button book",onClick:function(){return t=e.bus_id,localStorage.setItem("bus_id",t),void A.push("/user/book");var t},children:"Book"})]},t)})):Object(h.jsxs)("div",{style:{width:"100%"},children:[Object(h.jsxs)("p",{style:{fontSize:"20px"},children:["Sorry we couldn't find any Bus going to the"," ",f?"Hostel":"Campus"]}),Object(h.jsx)("img",{src:be,alt:"No Data",style:{width:"100%",border:"none",colorAdjust:"#000",outline:"none"}})]})})})]})}var he={height:"50px",width:"50px",borderRadius:"50%",background:"rgb(247, 10, 187)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",color:"#fff",fontFamily:"flamenco",margin:"5px",outline:"none"},fe={height:"50px",width:"50px",borderRadius:"50%",background:"grey",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",color:"#fff",fontFamily:"flamenco",margin:"5px",outline:"none",opacity:"0.5"};function me(e){e.loading;var t=Object(l.f)();return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"home-div",children:[Object(h.jsx)("button",{className:"input button green",onClick:function(){return t.push("/admin/register-bus")},children:"Register New Bus"}),Object(h.jsx)("button",{className:"input button green",onClick:function(){return t.push("/admin/buses")},children:"View Registered Buses"})]})})}function xe(e){var t=e.loading,r=Object(n.useState)(""),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(n.useState)(""),j=Object(o.a)(p,2),f=j[0],m=j[1],v=Object(n.useState)(""),y=Object(o.a)(v,2),k=y[0],S=y[1],N=Object(n.useState)(""),C=Object(o.a)(N,2),I=C[0],B=C[1],T=Object(n.useState)(!0),D=Object(o.a)(T,2),_=D[0],F=D[1],A=Object(l.f)();Object(n.useEffect)((function(){F(""===s||""===d||""===f||""===k)}),[d,s,f,k]);var E=w({url:"https://bookbus.herokuapp.com/bus/register",method:"post",body:{username:s,password:d,number_of_seat:k,bus_id:f}},{auth:!0,type:"admin"},t),z=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:201===e.sent.status&&(O.b.success("Bus Registered Successfully"),b(""),c(""),m(""),S(""),B("")),e.next=19;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.message,e.next="400"===e.t1?12:"401"===e.t1?14:18;break;case 12:return O.b.error("Bus Already Exist",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",19);case 14:return O.b.error("Session Expired"),A.push("/admin"),localStorage.clear(),e.abrupt("break",19);case 18:O.b.error("An error occured");case 19:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsxs)("form",{className:"dashboard-div",children:[Object(h.jsx)("input",{type:"text",className:"input",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Driver Username",required:!0}),Object(h.jsx)("input",{type:"text",className:"input",value:f,onChange:function(e){return m(e.target.value)},placeholder:"Bus Number",required:!0}),Object(h.jsx)("input",{type:"number",className:"input",value:k,onChange:function(e){return S(e.target.value)},placeholder:"Number of Seats",required:!0}),Object(h.jsx)("input",{type:"password",className:"input",value:d,onChange:function(e){return b(e.target.value)},placeholder:"Password",required:!0}),Object(h.jsx)("input",{type:"password",className:"input",value:I,onChange:function(e){return B(e.target.value)},placeholder:"Confirm Password",required:!0}),Object(h.jsx)("button",{className:"button green input",onClick:function(){return d===I?z():O.b.error("Password doesn't match")},style:{opacity:_?"0.6":"1"},children:"Register"})]})]})}function ge(e){var t=e.loading,r=Object(n.useState)([]),a=Object(o.a)(r,2),s=a[0],c=a[1],i=w({url:"https://bookbus.herokuapp.com/bus",method:"get"},{auth:!0,type:"admin"},t),u=Object(l.f)(),d=function(){var e=Object(g.a)(x.a.mark((function e(r){var n,a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.fire({title:"Input Pin",input:"password",inputPlaceholder:"Enter your Pin"});case 2:if(n=e.sent,!(a=n.value)){e.next=32;break}return e.prev=5,t(!0),e.next=9,S()({url:"https://bookbus.herokuapp.com/bus/admin/delete-driver",method:"DELETE",data:{pin:a,bus_id:r},headers:{"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("adminToken"))}});case 9:if(200!==e.sent.status){e.next=15;break}return D.a.fire("Account deleted successfully!"),t(!1),window.location.reload(),e.abrupt("return");case 15:t(!1),e.next=32;break;case 18:e.prev=18,e.t0=e.catch(5),s=e.t0.message.split(" ")[5],t(!1),console.log(s),e.t1=s,e.next="401"===e.t1?26:"400"===e.t1?29:31;break;case 26:return O.b.error("Session expired",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),setTimeout((function(){u.push("/admin"),localStorage.clear()}),3e3),e.abrupt("break",32);case 29:return O.b.error("Incorrect pin",{position:"top-right",autoClose:3e3,hideProgressBar:"false"}),e.abrupt("break",32);case 31:O.b.error("Network error",{position:"top-right",autoClose:3e3,hideProgressBar:"false"});case 32:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),b=Object(n.useCallback)(Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:t=e.sent,c(t.data),e.next=17;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.message,e.next="401"===e.t1?12:16;break;case 12:return O.b.error("Session Expired"),u.push("/admin"),localStorage.clear(),e.abrupt("break",17);case 16:O.b.error("An error occured");case 17:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,u]);return Object(n.useEffect)((function(){b()}),[]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsx)("div",{style:{fontSize:"22px",fontFamily:"flamenco",padding:"20px"},children:"Registered Buses"}),Object(h.jsx)("div",{className:"home",children:Array.isArray(s)&&0!==s.length?s.map((function(e,t){return Object(h.jsxs)("div",{className:"dashboard-div",children:[Object(h.jsxs)("div",{style:{height:"150px",width:"150px",borderRadius:"50%",background:"#b3f1cb",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},className:"",children:[Object(h.jsx)(C.a,{icon:I.b,size:"lg",style:{color:"#50c878"}}),Object(h.jsxs)("b",{style:{color:"#fff",fontSize:"2rem"},children:["0",e.bus_id]})]}),Object(h.jsxs)("p",{style:{fontFamily:"arapey",color:"#444"},children:["Driver Username: ",e.username]}),Object(h.jsxs)("p",{style:{fontFamily:"arapey",color:"#444"},children:["Number of Seats: ",e.number_of_seat]}),Object(h.jsx)("button",{className:"button red",onClick:function(){return d(e.bus_id)},children:"Delete"})]},t)})):Object(h.jsxs)("div",{style:{width:"100%"},children:[Object(h.jsx)("p",{style:{fontSize:"20px"},children:"No Bus Registered Yet"}),Object(h.jsx)("img",{src:be,alt:"No Data",style:{width:"100%",border:"none",colorAdjust:"#000",outline:"none"}})]})})]})}function Oe(e){var t=e.loading,r=Object(n.useState)({}),a=Object(o.a)(r,2),s=a[0],c=a[1],i=Object(l.f)(),u=w({url:"https://bookbus.herokuapp.com/bus/driver/ongoing-trip",method:"get"},{auth:!0,type:"driver"},t),d=Object(n.useCallback)(Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:200===(t=e.sent).status&&c(t.data),console.log(t.data),e.next=21;break;case 8:e.prev=8,e.t0=e.catch(0),e.t1=e.t0.message,e.next="400"===e.t1?13:"401"===e.t1?16:20;break;case 13:return D.a.fire({type:"success",text:"You have no ongoing trip"}),setTimeout((function(){i.push("/driver/dashboard")}),1e3),e.abrupt("break",21);case 16:return O.b.error("Session Expired"),localStorage.clear(),i.push("/driver"),e.abrupt("break",21);case 20:O.b.error("An error occured");case 21:case"end":return e.stop()}}),e,null,[[0,8]])}))),[u,i]);return Object(n.useEffect)((function(){d()}),[]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(O.a,{}),Object(h.jsxs)("div",{className:"home-div",children:[Object(h.jsx)("h1",{children:"Ongoing Trip Details"}),Object(h.jsxs)("p",{children:["Destination: ",s.destination]}),Object(h.jsxs)("p",{children:["Departure time: ",s.departure_time]}),Object(h.jsxs)("p",{children:["Number of booked seat: ",s.booked_seat]})]})]})}var ve=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(!1),c=Object(o.a)(s,2),u=c[0],d=c[1],b=Object(n.useState)(""),p=Object(o.a)(b,2),j=p[0],m=p[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),O=g[0],v=g[1],y=Object(n.useState)(!1),k=Object(o.a)(y,2),S=k[0],w=k[1],C=function(e){a(!!e)};return Object(h.jsxs)(h.Fragment,{children:[r?Object(h.jsx)(W,{}):null,Object(h.jsx)("div",{className:"App",style:{opacity:r?"0.1":"1",pointerEvents:r?"none":"all"},children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(z,{showNavbar:u,setShowNavbar:d,wallet:j,fundWallet:function(){d(!1),D.a.fire({title:"Enter Amount",input:"number",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Fund wallet",showLoaderOnConfirm:!0,preConfirm:function(e){v(100*e)},allowOutsideClick:function(){return!D.a.isLoading()}}).then((function(e){e.isConfirmed&&w(!0)}))}}),Object(h.jsx)("section",{style:{display:u?"none":"block"},children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/",children:Object(h.jsx)(f,{})}),Object(h.jsx)(l.a,{exact:!0,path:"/user",children:Object(h.jsx)(N,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/user/dashboard",children:Object(h.jsx)(je,{loading:C,setWallet:m,fund:S,setFund:w,amount:O})}),Object(h.jsx)(l.a,{exact:!0,path:"/user/book",children:Object(h.jsx)($,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/driver",children:Object(h.jsx)(te,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/admin",children:Object(h.jsx)(de,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/admin/dashboard",children:Object(h.jsx)(me,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/admin/register-bus",children:Object(h.jsx)(xe,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/admin/buses",children:Object(h.jsx)(ge,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/driver/dashboard",children:Object(h.jsx)(se,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/driver/newtrip",children:Object(h.jsx)(ue,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/driver/ongoing-trip",children:Object(h.jsx)(Oe,{loading:C})}),Object(h.jsx)(l.a,{exact:!0,path:"/user/ticket",children:Object(h.jsx)(q,{loading:C})})]})})]})})]})},ye=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,136)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(ve,{})}),document.getElementById("root")),ye()},66:function(e,t,r){},67:function(e,t,r){}},[[133,1,2]]]);
//# sourceMappingURL=main.bd183596.chunk.js.map